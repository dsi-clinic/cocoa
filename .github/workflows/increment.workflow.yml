name: Increment tag

on:
  push:
    branches:
      - thannifan/increment

jobs:
  increment:
    name: Increment version tag
    runs-on: ubuntu-latest

    steps:
      - name: Checkout Code Repository
        uses: actions/checkout@v3
      - name: Run increment action
        uses: rmeneely/git-next-version@v1
        with:
          set_next_version_tag: 'true'
          new_suffix: '-test'
          auto_increment: 'true'
      - name: Create tag
        uses: rickstaa/action-create-tag@v1
        id: "tag_create"
        with:
          tag: "$NEXT_VERSION"

      # # Print result using the env variable.
      # - run: |
      #   echo "Tag already present: ${{ env.TAG_EXISTS }}"

      # # Print result using the action output.
      # - run: |
      #   echo "Tag already present: ${{ steps.tag_create.outputs.tag_exists }}"


      # - name: Use environment variable
        # run: echo "Next version is $NEXT_VERSION"
